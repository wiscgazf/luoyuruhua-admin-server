webpackJsonp([6],{HXei:function(e,t){},LXvn:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("ZPfm"),s=a("PJh5"),i=a.n(s),o={name:"UserMain",data:function(){return{tableData:[],showText:!0,name:"",timeout:null,timeout1:null,noData:"",currentPage:1,totalCount:0,showCount:15,loading:!0}},components:{BreadCrumb:n.a},mounted:function(){this.getAdminInterface()},methods:{getAdminInterface:function(){var e=this;this.$http({method:"get",url:"/allUser",params:{name:e.name,currentPage:this.currentPage,showCount:this.showCount}}).then(function(t){e.getAdminData(t)}).catch(function(e){console.log(e)})},getAdminData:function(e){var t=e.data.Datas;if(this.totalCount=e.data.count,t.length>0){for(var a=0;a<t.length;a++)t[a].signature&&""!=t[a].signature||(t[a].signature="这个家伙懒的一笔！"),""!=t[a].age&&t[a].age||(t[a].age="NULL"),""==t[a].phone&&(t[a].phone="NULL"),""==t[a].email&&(t[a].email="NULL"),""!=t[a].sex&&t[a].sex?"1"==t[a].sex?t[a].sex="男":t[a].sex="女":t[a].sex="NULL",t[a].createTime&&(t[a].createTime=i()(t[a].createTime).format("YYYY-MM-DD HH:mm:ss"));this.tableData=t,this.loading=!1}else this.tableData=[],this.loading=!1,this.noData="没有找到合适的资源"},querySearchAsync:function(e,t){var a=this.tableData,n=e?a.filter(this.createStateFilter(e)):a;clearTimeout(this.timeout),this.timeout=setTimeout(function(){t(n)},2e3*Math.random())},createStateFilter:function(e){return function(t){return 0===t.name.toLowerCase().indexOf(e.toLowerCase())}},handleSelectName:function(e){this.name=e.name},linkToEdit:function(e){var t=this;this.$http({method:"get",url:"/authPermission",params:{name:this.cookie.getCookie("user")}}).then(function(a){"auth"==a.data.isAuth?t.$router.push({name:"EditUser",params:{id:e}}):t.$notify({title:"警告",message:"权限不足，无法编辑用户信息！",type:"warning"})}).catch(function(e){t.$message({message:"获取权限异常，请联系管理员！",type:"error"}),console.log(e)})},selectionChange:function(e){console.log(e)},handleSizeChange:function(e){this.showCount=e,this.getAdminInterface()},handleCurrentChange:function(e){this.currentPage=e,this.getAdminInterface()},delUser:function(e){var t=this;this.$http({method:"get",url:"/authPermission",params:{name:this.cookie.getCookie("user")}}).then(function(a){"auth"==a.data.isAuth?t.delUserFun(e):t.$notify({title:"警告",message:"权限不足，无法进行相应操作！",type:"warning"})}).catch(function(e){t.$message({message:"获取权限异常，请联系管理员！",type:"error"}),console.log(e)})},delUserFun:function(e){var t=this;this.$confirm("确认是否要删除该用户","删除用户",{distinguishCancelAndClose:!0,confirmButtonText:"确认",cancelButtonText:"取消"}).then(function(){t.$http({method:"delete",url:"/delUser",data:{id:e}}).then(function(e){"1"==e.data.msg&&(t.$message({title:"成功",message:e.data.des,type:"success"}),t.getAdminInterface())}).catch(function(e){t.$message({title:"失败",message:"删除用户失败，请联系管理员！",type:"error"}),console.log(e)})}).catch(function(e){t.$message({type:"info",message:"已取消"})})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("gemini-scrollbar",{staticClass:"my-scroll-bar"},[a("bread-crumb"),e._v(" "),a("div",{staticClass:"find_admin"},[a("el-autocomplete",{staticStyle:{"margin-left":"20px"},attrs:{"popper-class":"my-autocomplete","fetch-suggestions":e.querySearchAsync,size:"small",placeholder:"用户名"},on:{select:e.handleSelectName},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item;return[a("span",{staticClass:"name"},[e._v(e._s(n.name))])]}}]),model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[a("i",{staticClass:"el-icon-edit el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:function(t){e.getAdminInterface()}}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"admin_list"},[e.tableData.length>0?[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",stripe:"","row-key":e.tableData.id,fit:"","highlight-current-row":""},on:{"selection-change":e.selectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间","show-overflow-tooltip":e.showText},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.createTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"用户名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"age",label:"年龄"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号","show-overflow-tooltip":e.showText}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱","show-overflow-tooltip":e.showText}}),e._v(" "),a("el-table-column",{attrs:{prop:"userImg",label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("div",{staticClass:"user_img"},[a("img",{attrs:{src:e.row.userImg,alt:""}})])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"signature",label:"签名","show-overflow-tooltip":e.showText}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.linkToEdit(t.row.id)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.delUser(t.row.id)}}},[e._v("移除")])]}}])})],1)]:[a("p",[e._v(e._s(e.noData))])],e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[15,25,35,50],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],2)],1)},staticRenderFns:[]};var r=a("VU/8")(o,l,!1,function(e){a("HXei")},"data-v-eb7d2bc6",null);t.default=r.exports}});
//# sourceMappingURL=6.14d38fca027a01d7b232.js.map