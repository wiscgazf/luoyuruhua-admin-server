webpackJsonp([4],{"2pzT":function(t,e,a){"use strict";var o={name:"UE",data:function(){return{editor:null}},props:{defaultMsg:{type:String},config:{type:Object}},mounted:function(){var t=this;this.editor=UE.getEditor("editor",this.config),this.editor.addListener("ready",function(){t.editor.setContent(t.defaultMsg)})},methods:{getUEContent:function(){return this.editor.getContent()}},destroyed:function(){this.editor.destroy()}},i={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("script",{attrs:{id:"editor",type:"text/plain"}})])}]},r=a("VU/8")(o,i,!1,null,null,null);e.a=r.exports},Zebw:function(t,e){t.exports="data:image/gif;base64,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"},biSI:function(t,e){},tRqb:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("ZPfm"),i=a("2pzT"),r={name:"AddNotes",components:{BreadCrumb:o.a,UE:i.a},data:function(){return{loading:!1,config:{initialFrameWidth:1200,initialFrameHeight:1200,autoFloatEnabled:!1,scaleEnabled:!0},form:{title:"",category:"",tag:[],thumbImg:a("Zebw"),description:"",content:"请编写您的随笔 . . ."},rules:{title:[{required:!0,message:"请输入随笔标题",trigger:"blur"}],category:[{required:!0,message:"请选择随笔类别",trigger:"change"}],description:[{required:!0,message:"请输入随笔概要",trigger:"blur"}]}}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$notify({title:"警告",message:"请完善所需要的信息！",type:"warning"}),!1;e.addNotes()})},cancel:function(){this.$router.push({name:"NotesMain"})},changeImg:function(t){var e=this,a=t.target.files,o=new Image;if(a.length>0)var i=0,r=setInterval(function(){if("image/png"!=a.item(i).type&&"image/jpeg"!=a.item(i).type&&"image/gif"!=a.item(i).type)return!1;a.item(i).size>2048e3?e.$notify({title:"警告",message:"图片大小不得超过2MB",type:"error"}):(e.loading=!0,o.src=window.URL.createObjectURL(a.item(i)),o.onload=function(){var t=o.width,a=o.height,i=document.createElement("canvas"),r=i.getContext("2d"),n=document.createAttribute("width");n.nodeValue=t;var s=document.createAttribute("height");s.nodeValue=a,i.setAttributeNode(n),i.setAttributeNode(s),r.drawImage(o,0,0,t,a);var l=o.src.substring(o.src.lastIndexOf(".")+1).toLowerCase(),A=i.toDataURL("image/"+l,.8);e.uploadThumbImg(A),e.url=""}),i<a.length-1?i++:clearInterval(r)},1e3)},uploadThumbImg:function(t){var e=this;this.$http({method:"post",url:"/addthumbImg",data:{thumbImg:t}}).then(function(t){e.$message({message:"上传成功",type:"success"}),e.loading=!1,e.form.thumbImg=t.data.thumbImg}).catch(function(t){e.loading=!1,e.$message.error("上传失败，请联系管理员！"),console.log(t)})},selectTag:function(t){this.form.tag=t},selectCategory:function(t){this.form.category=t},addNotes:function(){var t=this;this.form.content=this.$refs.ue.getUEContent(),this.$http({method:"post",url:"/addNotes",data:{name:this.cookie.getCookie("user"),form:this.form}}).then(function(e){"200"==e.data.code&&(t.$notify({title:"成功",message:"添加成功",type:"success"}),t.$router.push({name:"NotesMain"}))}).catch(function(e){t.$notify.error({title:"错误",message:"请联系管理员"}),console.log(e)})}},mounted:function(){}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("GeminiScrollbar",[a("bread-crumb"),t._v(" "),a("div",{staticClass:"add_notes"},[a("el-form",{ref:"form",attrs:{rules:t.rules,model:t.form,"label-width":"100px"}},[a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"随笔标题",prop:"title"}},[a("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"随笔分类",prop:"category"}},[a("el-select",{attrs:{placeholder:"请选择类别"},on:{change:function(e){t.selectCategory(e)}},model:{value:t.form.category,callback:function(e){t.$set(t.form,"category",e)},expression:"form.category"}},[a("el-option",{attrs:{label:"css",value:"css"}}),t._v(" "),a("el-option",{attrs:{label:"javascript",value:"javascript"}}),t._v(" "),a("el-option",{attrs:{label:"jquery",value:"jquery"}}),t._v(" "),a("el-option",{attrs:{label:"vue",value:"vue"}}),t._v(" "),a("el-option",{attrs:{label:"nodeJS",value:"nodeJS"}}),t._v(" "),a("el-option",{attrs:{label:"移动端",value:"移动端"}}),t._v(" "),a("el-option",{attrs:{label:"微信小程序",value:"微信小程序"}}),t._v(" "),a("el-option",{attrs:{label:"其他",value:"其他"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"自定义标签"}},[a("el-select",{attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择文章标签"},on:{change:function(e){t.selectTag(e)}},model:{value:t.form.tag,callback:function(e){t.$set(t.form,"tag",e)},expression:"form.tag"}},[a("el-option",{attrs:{label:"css",value:"css"}}),t._v(" "),a("el-option",{attrs:{label:"javascript",value:"javascript"}}),t._v(" "),a("el-option",{attrs:{label:"jquery",value:"jquery"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"缩略图"}},[a("div",{staticClass:"com-upload-img"},[a("div",{staticClass:"img_group"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"img_box",attrs:{id:"show_upload","element-loading-text":"上传中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("img",{attrs:{src:t.form.thumbImg,alt:""}}),t._v(" "),a("div",{staticClass:"filter"},[t._v("\n                上传\n                "),a("input",{attrs:{type:"file",accept:"image/*"},on:{change:function(e){t.changeImg(e)}}})])])])])]),t._v(" "),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"简单概要",prop:"description"}},[a("el-input",{attrs:{type:"textarea",rows:"6",placeholder:"建议50到200字符"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"随笔内容"}}),t._v(" "),a("div",{staticClass:"editor-container"},[a("UE",{ref:"ue",attrs:{defaultMsg:t.form.content,config:t.config}})],1),t._v(" "),a("el-form-item",{staticClass:"notes_btm",attrs:{align:"left"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("form")}}},[t._v("立即创建")]),t._v(" "),a("el-button",{on:{click:function(e){t.cancel()}}},[t._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(r,n,!1,function(t){a("biSI")},"data-v-8dc00618",null);e.default=s.exports}});
//# sourceMappingURL=4.ecb034cb563bc2a5ba7f.js.map