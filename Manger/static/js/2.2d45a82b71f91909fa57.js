webpackJsonp([2],{"1alW":function(e,t,r){var a=r("kM2E");a(a.S,"Number",{isInteger:r("AKgy")})},"7g2b":function(e,t){},AKgy:function(e,t,r){var a=r("EqjI"),o=Math.floor;e.exports=function(e){return!a(e)&&isFinite(e)&&o(e)===e}},"RRo+":function(e,t,r){e.exports={default:r("c45H"),__esModule:!0}},c45H:function(e,t,r){r("1alW"),e.exports=r("FeBl").Number.isInteger},jUbv:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("RRo+"),o=r.n(a),i={name:"AdminDetail",data:function(){var e=this;return{ruleForm2:{name:"周宏宇",phone:"",email:"",age:"",sex:"",signature:"",imgUrl:"",userId:"",permissions:""},rules2:{name:[{validator:function(e,t,r){""===t?r(new Error("请输入管理员名称")):r()},trigger:"blur",required:!0}],phone:[{validator:function(t,r,a){""===r?a(new Error("请输入手机号")):/^1(3|4|5|7|8)\d{9}$/.test(e.ruleForm2.phone)?a():a(new Error("手机号有误，请重新输入"))},trigger:"blur",required:!0}],age:[{validator:function(e,t,r){if(!t)return r(new Error("年龄不能为空"));setTimeout(function(){o()(t)?t<18?r(new Error("必须年满18岁")):r():r(new Error("请输入数字值"))},1e3)},trigger:"blur"}],sex:[{required:!0,message:"请选择您的性别",trigger:"change"}]},btnStatus:{info:!1,text:"提交"},disabled:!0}},components:{BreadCrumb:r("ZPfm").a},methods:{changeImg:function(e){var t=this,r=e.target.files,a=new Image;if(r.length>0)var o=0,i=setInterval(function(){if("image/png"!=r.item(o).type&&"image/jpeg"!=r.item(o).type&&"image/gif"!=r.item(o).type)return!1;r.item(o).size>1024e3?t.$notify({title:"警告",message:"图片大小不得超过2MB",type:"error"}):(a.src=window.URL.createObjectURL(r.item(o)),a.onload=function(){var e=100,r=100,o=e/r;r=(e=120)/o;var i=document.createElement("canvas"),s=i.getContext("2d"),n=document.createAttribute("width");n.nodeValue=e;var l=document.createAttribute("height");l.nodeValue=r,i.setAttributeNode(n),i.setAttributeNode(l),s.drawImage(a,0,0,e,r);var u=a.src.substring(a.src.lastIndexOf(".")+1).toLowerCase(),m=i.toDataURL("image/"+u,.7);t.ruleForm2.imgUrl=m,t.url=""}),o<r.length-1?o++:clearInterval(i)},1e3)},submitForm:function(e){var t=this,r=this;this.$refs[e].validate(function(e){if(!e)return r.$notify({title:"警告",message:"请输入要添加的管理员信息",type:"error"}),!1;r.btnStatus={info:!0,text:"提交中"},t.$http({method:"put",url:"/editAdmin",data:r.ruleForm2}).then(function(e){"1"==e.data.msg?(r.btnStatus={info:!1,text:"提交"},r.$notify({title:"成功",message:e.data.des,type:"success"}),r.$store.state.userPassword="",r.$store.state.userName="",r.$store.state.userId="",setTimeout(function(){r.$router.push({name:"Login"})},1e3)):(r.btnStatus={info:!1,text:"提交"},r.$notify({title:"警告",message:e.data.des,type:"error"}))}).catch(function(e){r.$message({message:"编辑出现错误，请联系管理员！",type:"error"}),console.log(e)})})},resetForm:function(e){this.$refs[e].resetFields()}},mounted:function(){var e=this;this.$http({method:"get",url:"/adminDetail",params:{id:this.$route.params.id}}).then(function(t){var r=t.data.data;e.ruleForm2.imgUrl=r.userImg,e.ruleForm2.name=r.name,e.ruleForm2.phone=r.phone,e.ruleForm2.sex=r.sex,e.ruleForm2.email=r.email,e.ruleForm2.age=r.age,e.ruleForm2.userId=r.id,e.ruleForm2.permissions=r.permissions,""!=r.signature&&r.signature?e.ruleForm2.signature=r.signature:e.ruleForm2.signature=""}).catch(function(e){console.log(e)}),this.$http({url:"/authPermission",params:{name:this.cookie.getCookie("user")}}).then(function(t){"auth"==t.data.isAuth&&(e.disabled=!1)}).catch(function(e){that.$message({message:"获取权限异常，请联系管理员！",type:"error"}),console.log(e)})}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("GeminiScrollbar",{staticClass:"admin_detail"},[r("bread-crumb"),e._v(" "),r("div",{staticClass:"edit_wrap"},[r("div",{staticClass:"add_admin_con"},[r("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm2,"status-icon":"",rules:e.rules2,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"管理员名称",prop:"name"}},[r("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:e.ruleForm2.name,callback:function(t){e.$set(e.ruleForm2,"name",t)},expression:"ruleForm2.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[r("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:e.ruleForm2.phone,callback:function(t){e.$set(e.ruleForm2,"phone",t)},expression:"ruleForm2.phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"所属权限"}},[r("el-select",{attrs:{placeholder:"请选择权限类型",disabled:e.disabled},model:{value:e.ruleForm2.permissions,callback:function(t){e.$set(e.ruleForm2,"permissions",t)},expression:"ruleForm2.permissions"}},[r("el-option",{attrs:{label:"作者",value:"auth"}}),e._v(" "),r("el-option",{attrs:{label:"管理员",value:"admin"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱"}},[r("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:e.ruleForm2.email,callback:function(t){e.$set(e.ruleForm2,"email",t)},expression:"ruleForm2.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"性别",prop:"sex"}},[r("el-radio-group",{model:{value:e.ruleForm2.sex,callback:function(t){e.$set(e.ruleForm2,"sex",t)},expression:"ruleForm2.sex"}},[r("el-radio",{attrs:{label:1}},[e._v("男")]),e._v(" "),r("el-radio",{attrs:{label:0}},[e._v("女")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"年龄",prop:"age"}},[r("el-input",{model:{value:e.ruleForm2.age,callback:function(t){e.$set(e.ruleForm2,"age",e._n(t))},expression:"ruleForm2.age"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"个性签名"}},[r("el-input",{attrs:{type:"textarea","auto-complete":"off"},model:{value:e.ruleForm2.signature,callback:function(t){e.$set(e.ruleForm2,"signature",t)},expression:"ruleForm2.signature"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",loading:e.btnStatus.info},on:{click:function(t){e.submitForm("ruleForm2")}}},[e._v(e._s(e.btnStatus.text)+"\n          ")]),e._v(" "),r("el-button",{on:{click:function(t){e.resetForm("ruleForm2")}}},[e._v("重置")])],1)],1)],1),e._v(" "),r("div",{staticClass:"com-upload-img"},[r("div",{staticClass:"img_group"},[r("div",{staticClass:"img_box",attrs:{id:"show_upload"}},[r("img",{attrs:{src:e.ruleForm2.imgUrl,alt:""}}),e._v(" "),r("div",{staticClass:"filter"},[r("input",{attrs:{type:"file",accept:"image/*"},on:{change:function(t){e.changeImg(t)}}})])]),e._v(" "),r("p",[e._v("点击上传")])])])])],1)},staticRenderFns:[]};var n=r("VU/8")(i,s,!1,function(e){r("7g2b")},"data-v-52ee0221",null);t.default=n.exports}});
//# sourceMappingURL=2.2d45a82b71f91909fa57.js.map