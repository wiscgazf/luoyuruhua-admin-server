webpackJsonp([11],{fdR2:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("ZPfm"),o=a("PJh5"),s=a.n(o),i={name:"Admin",data:function(){return{tableData:[],showText:!0,userphone:"",timeout:null,timeout1:null,noData:""}},components:{BreadCrumb:n.a},mounted:function(){this.getAdminInterface()},methods:{getAdminInterface:function(){var t=this;this.$http({method:"get",url:"/findAllAdmin",params:{phone:t.userphone}}).then(function(e){t.getAdminData(e)}).catch(function(t){console.log(t)})},getAdminData:function(t){var e=t.data.res;if(e.length>0){for(var a=0;a<e.length;a++)e[a].userImg&&""!=e[a].userImg||(e[a].userImg="NULL"),e[a].signature&&""!=e[a].signature||(e[a].signature="这个家伙懒的一笔！"),"1"==e[a].sex?e[a].sex="男":e[a].sex="女",e[a].createTime&&(e[a].createTime=s()(e[a].createTime).format("YYYY-MM-DD HH:mm:ss")),"auth"==e[a].permissions?e[a].permissions="作者":"admin"==e[a].permissions&&(e[a].permissions="管理员");this.tableData=e}else this.tableData=[],this.noData="没有找到合适的资源"},querySearchAsync:function(t,e){var a=this.tableData,n=t?a.filter(this.createStateFilter(t)):a;clearTimeout(this.timeout),this.timeout=setTimeout(function(){e(n)},2e3*Math.random())},createStateFilter:function(t){return function(e){return 0===e.phone.toLowerCase().indexOf(t.toLowerCase())}},handleSelectPhone:function(t){this.userphone=t.phone},linkToDetail:function(t){this.linkTo(t,"AdminDetail")},linkToEdit:function(t){this.linkTo(t,"EditAdmin")},linkTo:function(t,e){var a=this;this.$http({method:"get",url:"/authPermission",params:{name:this.cookie.getCookie("user")}}).then(function(n){"auth"==n.data.isAuth?a.$router.push({name:e,params:{id:t}}):t==n.data.id?a.$router.push({name:e,params:{id:t}}):a.$notify({title:"警告",message:"权限不足，无法编辑或查看其他管理员信息！",type:"warning"})}).catch(function(t){a.$message({message:"登录异常，请联系管理员！",type:"error"}),console.log(t)})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("GeminiScrollbar",{staticClass:"my-scroll-bar"},[a("bread-crumb"),t._v(" "),a("div",{staticClass:"find_admin"},[a("el-autocomplete",{attrs:{"popper-class":"my-autocomplete","fetch-suggestions":t.querySearchAsync,size:"small",placeholder:"手机号"},on:{select:t.handleSelectPhone},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item;return[a("span",{staticClass:"name"},[t._v(t._s(n.phone))])]}}]),model:{value:t.userphone,callback:function(e){t.userphone=e},expression:"userphone"}},[a("i",{staticClass:"el-icon-edit el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})]),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:function(e){t.getAdminInterface()}}},[t._v("搜索")])],1),t._v(" "),a("div",{staticClass:"admin_list"},[t.tableData.length>0?[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"",stripe:"","row-key":t.tableData.id,fit:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间","show-overflow-tooltip":t.showText},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-time"}),t._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.createTime))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"管理员"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别"}}),t._v(" "),a("el-table-column",{attrs:{prop:"age",label:"年龄"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号","show-overflow-tooltip":t.showText}}),t._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱","show-overflow-tooltip":t.showText}}),t._v(" "),a("el-table-column",{attrs:{prop:"userImg",label:"头像"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("div",{staticClass:"user_img"},[a("img",{attrs:{src:t.row.userImg,alt:""}})])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"signature",label:"签名","show-overflow-tooltip":t.showText}}),t._v(" "),a("el-table-column",{attrs:{prop:"permissions",label:"拥有权限","show-overflow-tooltip":t.showText}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.linkToDetail(e.row.id)}}},[t._v("查看")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.linkToEdit(e.row.id)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"}},[t._v("移除")])]}}])})],1)]:[a("p",[t._v(t._s(t.noData))])]],2)],1)},staticRenderFns:[]};var r=a("VU/8")(i,l,!1,function(t){a("lX6B")},"data-v-6479588e",null);e.default=r.exports},lX6B:function(t,e){}});
//# sourceMappingURL=11.d54e37ac1f1c710956ec.js.map